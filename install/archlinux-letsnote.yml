---
- hosts: 127.0.0.1
  vars:
    - ansible_python_interpreter: /usr/bin/python2
  tasks:
    - name: pacman -Syy
      pacman: update_cache=yes
      sudo: yes
    - name: Install Xorg
      pacman: name=xorg-server,xorg-server-utils,xorg-xinit,mesa,xf86-video-intel,xf86-input-synaptics,xterm,xclip
      sudo: yes
    - name: Setup X setting files
      file: src=~/dotfiles/{{item.path}} dest=~/{{item.dest}} state=link
      with_items:
        - { path: '.xinitrc', dest: '.xinitrc' }
        - { path: '.Xresources.d', dest: '.Xresources.d' }
    - name: Install awesome wm
      pacman: name=awesome,rxvt-unicode
      sudo: yes
    - file: path=~/.config state=directory
    - file: src=~/dotfiles/config/awesome dest=~/.config/awesome state=link
    - name: Install fonts
      pacman: name=ttf-dejavu,ttf-liberation,otf-ipafont
      sudo: yes
    - name: Install fcitx-mozc
      pacman: name=fcitx-im,fcitx-configtool,fcitx-mozc
      sudo: yes

    - name: Install vim
      pacman: name=gvim
      sudo: yes
    - name: Setup vimrc
      file: src=~/dotfiles/{{item.path}} dest=~/{{item.dest}} state=link
      with_items:
        - { path: '.vim', dest: '.vim' }
        - { path: '.vimrc', dest: '.vimrc' }
        - { path: '.gvimrc', dest: '.gvimrc' }

    - name: Install emacs
      pacman: name=emacs
      sudo: yes
    - name: Setup emacs.d
      file: src=~/dotfiles/.emacs.d dest=~/.emacs.d state=link

    - name: Install slim
      pacman: name=slim
      sudo: yes
    - name: Edit slim.conf
      command: patch slim.conf.patch
    - name: Enable slim
      service: name=slim enabled=yes
      sudo: yes
    - name: Set X keyboard layout
      command: localectl set-x11-keymap us pc104 ,dvorak ctrl:swapcaps
      sudo: yes

    - name: Install firefox
      pacman: name=firefox,flashplugin
      sudo: yes
    - pacman: name=zathura,zathura-pdf-mupdf
      sudo: yes
    - pacman: name=alsa-utils
      sudo: yes

    - name: Setup .gitconfig
      file: src=~/dotfiles/.gitconfig dest=~/.gitconfig state=link

